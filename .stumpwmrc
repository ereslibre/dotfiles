;; -*- Mode:p Lisp -*-
;;; .stumpwmrc --- StumpWM Init File

(in-package :stumpwm)

;; Modeline

(setf *startup-message* nil)
(setf *mode-line-timeout* 60)
(if (not (head-mode-line (current-head)))
    (toggle-mode-line (current-screen) (current-head)))

(setf *screen-mode-line-format*
      (list "[^B%n^b] %W"
            "^>"
            "^7*"
            " [" '(:eval (run-shell-command "cat /sys/class/power_supply/BAT0/status | tr -d '\\r\\n'" t)) " | "
                 '(:eval (run-shell-command "cat /sys/class/power_supply/BAT0/capacity | tr -d '\\r\\n'" t)) "%]"
            ))

;; Defaults

;;(load-module "ttf-fonts")
;;(set-font (make-instance 'xft:font :family "Ubuntu" :subfamily "Regular" :size 11))

(setf *group-format* "%s [%n] %t ")
(setf *window-format* "%m%n%s%c")

(setf *message-window-gravity* :top-right)
(setf *input-window-gravity* :top-right)

(setq *ignore-wm-inc-hints* t)

(setq *window-border-style* :thin)

(setf *timeout-wait* 5)

(setf *mouse-focus-policy* :click)

;; Shortcuts

(define-key *top-map* (kbd "C-Q") "quit")
(define-key *top-map* (kbd "C-Return") "exec terminator")

(define-key *top-map* (kbd "M-n") "pull-hidden-next")
(define-key *top-map* (kbd "M-p") "pull-hidden-previous")
(define-key *top-map* (kbd "M-N") "gnext")
(define-key *top-map* (kbd "M-P") "gprev")

(define-key *root-map* (kbd "c") "exec terminator")
(define-key *root-map* (kbd "C-c") "exec terminator")

(define-key *root-map* (kbd "M-m") "exec geary")
(define-key *root-map* (kbd "M-c") "exec chromium")
(define-key *root-map* (kbd "M-g") "exec nautilus")
(define-key *root-map* (kbd "M-q") "exec quasselclient")
(define-key *root-map* (kbd "M-i") "exec telegram-desktop")

(define-key *root-map* (kbd "C-n") "move-focus down")
(define-key *root-map* (kbd "C-p") "move-focus up")
(define-key *root-map* (kbd "C-f") "move-focus right")
(define-key *root-map* (kbd "C-b") "move-focus left")

(define-key *root-map* (kbd "M-p") "move-window up")
(define-key *root-map* (kbd "M-b") "move-window left")
(define-key *root-map* (kbd "M-n") "move-window down")
(define-key *root-map* (kbd "M-f") "move-window right")

;; Create groups

(run-commands "grename code" "gnewbg www" "gnewbg im" "gnewbg mail" "gnewbg media")
